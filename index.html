<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Izzys Spending tracker</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="app-header">
    <h1 class="brand">Izzys Spending tracker</h1>
  </header>

  <main class="container">
    <section class="card">
      <h2>Add Purchase</h2>
      <form id="purchase-form" autocomplete="off">
        <div class="grid">
          <label>
            <span>Item</span>
            <input id="item" name="item" type="text" required placeholder="e.g., Latte">
          </label>
          <label>
            <span>Category</span>
            <select id="category" name="category">
              <option value="">Select category</option>
              <option>Groceries</option>
              <option>Dining Out & Coffee</option>
              <option>Beauty & Personal Care</option>
              <option>Fashion & Accessories</option>
              <option>Fitness & Wellness</option>
              <option>Transport & Rides</option>
            </select>
          </label>
          <label>
            <span>Amount</span>
            <input id="price" name="price" type="number" step="0.01" min="0" required placeholder="0.00">
          </label>
          <label>
            <span>When</span>
            <div class="today-wrap">
              <label class="inline"><input id="was-today" type="checkbox" checked> Was this today?</label>
              <input id="date" name="date" type="date" class="hidden">
            </div>
          </label>
        </div>
        <div class="actions">
          <button type="submit" class="primary">Add</button>
          <button type="button" id="reset-form" class="ghost">Reset</button>
        </div>
      </form>
    </section>


    <section class="card">
      <div class="list-header">
        <h2>Purchases</h2>
        <div class="actions">
          <button id="export-json" class="ghost">Export JSON</button>
          <label class="import-btn">
            <input id="import-json" type="file" accept="application/json">
            <span>Import JSON</span>
          </label>
          <button id="clear-all" class="danger ghost">Clear All</button>
        </div>
      </div>
      <div class="totals" id="totals"></div>
      <div class="table-wrapper">
        <table id="purchase-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Item</th>
              <th>Category</th>
              <th class="num">Amount</th>
              <th></th>
            </tr>
            <tr class="filters-row">
              <th>
                <div class="filters">
                  <input id="filter-from" type="date" placeholder="From">
                  <input id="filter-to" type="date" placeholder="To">
                </div>
              </th>
              <th><input id="filter-text" type="text" placeholder="Search item"></th>
              <th>
                <select id="filter-category">
                  <option value="">All categories</option>
                  <option>Groceries</option>
                  <option>Dining Out & Coffee</option>
                  <option>Beauty & Personal Care</option>
                  <option>Fashion & Accessories</option>
                  <option>Fitness & Wellness</option>
                  <option>Transport & Rides</option>
                </select>
              </th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody id="purchase-tbody"></tbody>
        </table>
      </div>
    </section>
    <section class="card">
      <h2>Spending by Week</h2>
      <canvas id="spend-chart" height="160"></canvas>
    </section>
  </main>

  <footer class="app-footer">
    <small>Data is stored locally in your browser.</small>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="app.js"></script>
  <script>
    const dateEl = document.getElementById('date');
    const wasToday = document.getElementById('was-today');
    if (wasToday && dateEl) {
      const setToday = () => {
        const now = new Date();
        dateEl.valueAsNumber = now - (now.getTimezoneOffset() * 60000);
      };
      setToday();
      wasToday.addEventListener('change', () => {
        dateEl.classList.toggle('hidden', wasToday.checked);
        if (wasToday.checked) setToday();
      });
      dateEl.classList.add('hidden');
    }
  </script>
  
</body>
</html>


